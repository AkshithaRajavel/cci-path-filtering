version: '2.1'
jobs:
  build:
    docker:
      - image: cimg/base:2023.03
    steps:
      - checkout
      - run: |
          dirs=()
          git diff --name-only HEAD~1 HEAD | while read -r file; do
              dir=$(dirname "$file")
              echo $dir
              dirs+=("$dir")
          done
          echo "List of root directories:"
          for dir in "${dirs[@]}"; do
              echo "DIR: $dir"
          done

workflows:
  version: 2
  filter:
    jobs:
      - build
          paths:
            only:
              - ./workflow1/*