version: '2.1'
orbs:
  path-filtering: circleci/path-filtering@0.1.7
parameters:
  wf:
    type: string
    default: "filter"
jobs:
  wf1:
    docker:
      - image: cimg/base:2021.05
    steps:
      - run: echo "wf1"
  wf2:
    docker:
      - image: cimg/base:2021.05
    steps:
      - run: echo "wf2"
workflows:
  filter:
    when:
      equal: [<< pipeline.parameters.wf >>, "filter"]
    jobs:
      - path-filtering/filter:
          base-revision: main
          config-path: .circleci/config.yml
          mapping: |
            .circleci/.* wf "exit" 
            workflow1/.* wf "wf1" 
            workflow2/.* wf "wf2" 
  wf1:
    when:
      equal: [<< pipeline.parameters.wf >>, "wf1"]
    jobs:
      - wf1
  wf2:
    when:
      equal: [<< pipeline.parameters.wf >>, "wf2"]
    jobs:
      - wf2